class PotentialLib:
    'Potential library'

    m_values = {
        '% STR': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% DEX': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% INT': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% LUK': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% Avoid': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% Accuracy': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        
        '% Boss Damage': {
            4: [
                (100, 250, 0.4),
                (100, 250, 0.35),
                (50, 250, 0.3),
                ],
            3: [
                (100, 250, 0.3),
                (50, 250, 0.2),
                ],
            },
        '% Weapon ATT': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% Magic ATT': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% Total Damage': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (151, 250, 0.07),
                (71, 150, 0.06),
                (31, 70, 0.04),
                (0, 30, 0.02),
                ],
            1: [
                (151, 250, 0.04),
                (71, 150, 0.03),
                (31, 70, 0.02),
                (0, 30, 0.01),
                ],
            },
        '% Crit Rate': {
            4: [
                (151, 250, 0.13),
                (71, 150, 0.12),
                (31, 70, 0.09),
                (0, 30, 0.06),
                ],
            3: [
                (151, 250, 0.1),
                (71, 150, 0.09),
                (31, 70, 0.06),
                (0, 30, 0.03),
                ],
            2: [
                (0, 250, 0.08),
                ],
            1: [
                (0, 250, 0.04),
                ],
            },
        '% Ignore Defense': {
            4: [
                (100, 250, 0.4),
                (50, 250, 0.35),
                ],
            3: [
                (50, 250, 0.3),
                ],
            2: [
                (50, 250, 0.15),
                ],
            },
        }

    m_libType = {
        'generic': [],
        'Weapon': [
                '% STR',
                '% DEX',
                '% INT',
                '% LUK',
                '% Accuracy',
                '% Avoid',
                '% Boss Damage',
                '% Weapon ATT',
                '% Magic ATT',
                '% Total Damage',
                '% Crit Rate',
                '% Ignore Defense',
                ],
        'Secondary': [
                '% STR',
                '% DEX',
                '% INT',
                '% LUK',
                '% Accuracy',
                '% Avoid',
                '% Boss Damage',
                '% Weapon ATT',
                '% Magic ATT',
                '% Total Damage',
                '% Crit Rate',
                '% Ignore Defense',
                ],
        'Hat': [
                '% STR',
                '% DEX',
                '% INT',
                '% LUK',
                '% Accuracy',
                '% Avoid',
                '% Boss Damage',
                '% Weapon ATT',
                '% Magic ATT',
                '% Total Damage',
                '% Crit Rate',
                '% Ignore Defense',
                ],
        }

    def roll(self, pot, rank):
        lineTypes = self.m_libType[pot.m_type]
        options = []
        for key, value in self.m_values.items():
            if key not in lineTypes:
                continue
            if key == '% Boss Damage':
                count = 0
                if [line[0] for line in pot.m_lines].count('% Boss Damage') >= 2:
                    continue
            if rank in value.keys():
                potValues = value[rank]
                for line in potValues:
                    minLvl = line[0]
                    maxLvl = line[1]
                    val = line[2]
                    if minLvl <= pot.m_level and maxLvl >= pot.m_level:
                        options.append((key, val))
        return options
        
                
        
        
